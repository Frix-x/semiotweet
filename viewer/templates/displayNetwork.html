{% extends "template.html" %}
{% block title %} | Keywords network {% endblock %}
{% load static %}

{% block content %}
<div class="section no-pad-bot" id="index-banner">
    <div class="container">
        <br><br>
        <h1 class="header center orange-text">Network</h1>
        <br><br>
    </div>
</div>

<div id="actionButton"></div>

<div class="container">
    <div class="section">
        <div class="row">
            <div class="col s12 m12">
                <div class="icon-block">
                    <div class="keywordNetwork" id="keywordsNetwork">
                        <div class="keywordNetworkCanvas"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
<script src="{% static "js/utils.js" %}"></script>
<script src="{% static "js/sigma.min.js" %}"></script>
<script src="{% static "js/sigma.layout.forceAtlas2.min.js" %}"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var width = $('#keywordsNetwork').parent().width();
        $('#keywordsNetwork').width(width);
        $('#keywordsNetwork').height(width * 2 / 3);
        $.get('/api/v1/nlp/network/tweets', function(res, status) {
            if (status === 'success') {
                makeSigmaNetwork('keywordsNetwork', res.network, function(s) {
                    sigmaInst = s;
                    $('#actionButton').html('<div class="fixed-action-btn"><a class="btn-floating btn-large orange"><i class="large material-icons">tune</i>' +
                        '</a><ul><li><a id="simuOff" class="btn-floating red"><i class="material-icons">pause_circle_outline</i>' +
                        '</a></li><li><a id="simuOn" class="btn-floating green"><i class="material-icons">play_circle_outline</i></a></li></ul></div>');
                        $('#simuOn').click(function() {
                            sigmaInst.startForceAtlas2();
                        });
                        $('#simuOff').click(function() {
                            sigmaInst.stopForceAtlas2();
                        });
                });
            }
        });
    });
</script>
{% endblock %}
