{% extends "template.html" %}
{% block title %} | HomePage {% endblock %}

{% block content %}

<div class="section no-pad-bot" id="index-banner">
    <div class="container">
        <br><br>
        <h1 class="header center blue-grey-text text-darken-4">Semiotweet</h1>
        <div class="row center">
            <h5 class="header col s12 light">Tweets analysis from Politics</h5>
        </div>
        <br><br>
    </div>
</div>


<div class="container">
    <div class="section">

        <div class="row">
            <div class="col s12 m4">
                <div class="icon-block">
                    <h5 class="center">Tweet sources</h5>
                    <canvas id="doughnutSources"></canvas>
                </div>
            </div>

            <div class="col s12 m8">
                <div class="icon-block">
                    <h5 class="center">Most common words</h5>
                    <canvas id="barCommonWords"></canvas>
                </div>
            </div>
        </div>

    </div>
    <br><br>
</div>
{% endblock %}




{% block script %}


<script>
var sources = {{sources|safe}};
var num = {{num|safe}};
var ctx = document.getElementById("doughnutSources");
var colors = ["#FF6384","#36A2EB","#FFCE56","#FFBA49","#20A39E",
              "#EF5B5B","#23001E","#A4A9AD","#8CDFD6","#5A716A"];
var data = {
  labels: sources,
  datasets: [
      {
          data: num,
          backgroundColor: colors,
          hoverBackgroundColor: colors
      }]
};
var options = {
    animation:{
        animateScale:true
    },
    title: {
        display: false,
        text: 'Tweet Sources'
    }
};
var myDoughnutChart = new Chart(ctx, {
    type: 'doughnut',
    data: data,
    options: options
});
</script>

<script>
var words = {{words|safe}};
words.sort(function(a, b) {
    return b.occur - a.occur
});
var word = [];
var occur = [];
var colorsForBars = {{colorsForBars|safe}}

for (i = 0; i < words.length; i++) {
    word.push(words[i].word);
    occur.push(words[i].occur);
}
var ctxBar = "barCommonWords";
var dataBar = {
  labels: word,
  datasets: [
      {
          label: "Word occurences",
          backgroundColor: colorsForBars,
          borderColor: colorsForBars,
          borderWidth: 1,
          data: occur,
      }
  ]
};
var myBarChart = new Chart(ctxBar, {
  type: 'bar',
  data: dataBar,
  options: options
});
</script>
{% endblock %}
