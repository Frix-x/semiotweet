{% extends "template.html" %}
{% block title %} | Accueil {% endblock %}
{% load static %}
{% block content %}

<div class="section no-pad-bot" id="index-banner">
    <div class="container">
        <br><br>
        <h1 class="header center orange-text">Semiotweet</h1>
        <div class="row center">
            <h5 class="header col s12 light">Analyse des tweets des candidats à la présidentielle</h5>
        </div>
        <br><br>
    </div>
</div>


<div class="container">
    <div class="section" id="Graphs">
          <div class="row">
            {% if maj %}
            <div class="col s12 m6">
            {% else %}
            <div class="col s12 m12">
            {% endif %}
                <div class="icon-block">
                  <div class="icon-block">
                    <h5 class="center">Aperçu</h5>
                    <br>
                    <p>
                      Semiotweet permet d'analyser les tweets des 11 candidats
                      à l'élection présidentielle française de 2017 et d'en ressortir des informations telles
                      que les mots, les champs sémantiques et les sujets les plus abordés par chaque candidat.
                      <br>
                      Ceci est une première version qui est amenée à être améliorée et étoffée au fur et à mesure avec d'autres indicateurs.
                      <br>N'hésitez pas à y jeter un coup d'oeil et à partager vos retours !<br><br>
                      {% if maj %}Dernière mise à jour le : <b>{{maj}}</b>{% endif %}
                    </p>
                  </div>
                </div>
            </div>
            {% if maj %}
            <div class="col s12 m3">
                <div class="icon-block">
                    <h5 class="center">Sources des tweets</h5>
                    <canvas id="doughnutSources"></canvas>
                </div>
            </div>
            <div class="col s12 m3">
                <div class="icon-block">
                  <div class="card vertical">
                    <div class="card-stacked">
                      <div class="card-content" id="NbTweetsByPolitics"></div>
                      <div class="card-action">
                        <a>Nombre de tweets de chaque candidat</a>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    <br><br>
</div>
{% endblock %}




{% block script %}
<script src="{% static "js/Chart.js" %}"></script>
<script src="{% static "js/utils.js" %}"></script>
<script>
$(document).ready(function () {
  createDonut("doughnutSources", {{sources|safe}}, {{num|safe}});

  var politics = {{politics|safe}};
  var nbTweets = {{nbTweets|safe}};
  var content= '';
  for(var i=0 ; i < politics.length ; i++)
    content += '<tr><td>'+ politics[i] + ':</td><td>' + nbTweets[i] + '</td></tr>';
  $( "#NbTweetsByPolitics").html("<table>"+content + "</table>");
});
</script>
{% endblock %}
